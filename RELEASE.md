# bitnet-api 发布流程

本文档描述了如何发布一个新版本的 bitnet-api 包到 PyPI.

## 发布准备

1. 确保所有代码更改已经完成并提交到版本控制系统
2. 更新版本号
3. 构建并上传包到 PyPI

## 步骤详解

### 1. 更新版本号

使用提供的版本号更新工具：

```bash
# 更新补丁版本 (0.1.0 -> 0.1.1)
python bump_version.py patch

# 更新次要版本 (0.1.0 -> 0.2.0)
python bump_version.py minor

# 更新主要版本 (0.1.0 -> 1.0.0)
python bump_version.py major
```

### 2. 更新 CHANGELOG.md (如果有)

记录此版本中的更改内容。

### 3. 发布到 PyPI

使用发布脚本自动处理构建和上传过程：

```bash
./publish.sh
```

此脚本将：
- 清理旧的构建文件
- 构建源码包和轮子包
- 检查构建文件格式
- 上传包到 PyPI（需要确认）

### 注意事项

- 确保 `~/.pypirc` 文件已正确配置
- 确保已安装必要的发布工具：`pip install build twine`
- 发布前测试构建的包：`pip install dist/*.whl`

## 问题排查

### 版本冲突

PyPI 不允许重复发布同一版本号。如果出现版本冲突，请：

1. 增加版本号
2. 重新构建包
3. 再次上传

### 授权问题

如果出现授权错误，请检查 `~/.pypirc` 文件中的凭据是否正确。

## 后续步骤

- 在 GitHub 上创建发布标签和说明
- 更新文档
- 通知用户新版本发布 